import json

json_data ={
    "jobName": "sample-13.mp3--c82babdb-3ab7-422e-abd8-1e649c8f430c",
    "accountId": "430263571766",
    "status": "COMPLETED",
    "results": {
        "transcripts": [
            {
                "transcript": "This recording is from the British Council. Hello. Can I help? My wife sent me here. I am. Needs something for a sore throat and can't stop coughing. Yeah. Really hurts. Do you have a headache too? Not really? No. Well, we have the syrup and these lozenges, which is better. They're both good. The syrup is more expensive. You, I'll take the lozenges then. How many do I take? Just one? Sorry, I'm sorry. Uh, how often should I take it? Just one every 4 to 6 hours? Take it before meal times. Are you allergic to any medicine? Then you'll be fine with this. Can I get some antibiotics too? I'm afraid you need a prescription for that. You know, you should see a doctor if that cough continues. I know anything else. No, thanks. That'll be Â£7.49. Then please. This recording is from the British Council to find more activities to practice your English visit. Www dot British council.org/learn English."
            }
        ],
        "speaker_labels": {
            "segments": [
                {
                    "start_time": "0.389",
                    "end_time": "2.849",
                    "speaker_label": "spk_0",
                    "items": [
                        {
                            "speaker_label": "spk_0",
                            "start_time": "0.4",
                            "end_time": "0.73"
                        },
                        {
                            "speaker_label": "spk_0",
                            "start_time": "0.74",
                            "end_time": "1.35"
                        },
                        {
                            "speaker_label": "spk_0",
                            "start_time": "1.36",
                            "end_time": "1.5"
                        },
                        {
                            "speaker_label": "spk_0",
                            "start_time": "1.509",
                            "end_time": "1.69"
                        },
                        {
                            "speaker_label": "spk_0",
                            "start_time": "1.7",
                            "end_time": "1.779"
                        },
                        {
                            "speaker_label": "spk_0",
                            "start_time": "1.789",
                            "end_time": "2.14"
                        },
                        {
                            "speaker_label": "spk_0",
                            "start_time": "2.15",
                            "end_time": "2.74"
                        }
                    ]
                },
                {
                    "start_time": "7.989",
                    "end_time": "12.479",
                    "speaker_label": "spk_1",
                    "items": [
                        {
                            "speaker_label": "spk_1",
                            "start_time": "8.0",
                            "end_time": "8.579"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "8.63",
                            "end_time": "8.92"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "8.93",
                            "end_time": "8.96"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "8.97",
                            "end_time": "9.439"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "10.569",
                            "end_time": "10.72"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "10.729",
                            "end_time": "11.06"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "11.069",
                            "end_time": "11.279"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "11.289",
                            "end_time": "11.47"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "11.479",
                            "end_time": "11.81"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "11.819",
                            "end_time": "11.949"
                        },
                        {
                            "speaker_label": "spk_1",
                            "start_time": "12.029",
                            "end_time": "12.289"
                        }
                    ]
                }
            ],
            "channel_label": "ch_0",
            "speakers": 2
        },

        "items": [
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.999",
                        "content": "This"
                    }
                ],
                "start_time": "0.4",
                "end_time": "0.73",
                "speaker_label": "spk_0"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.999",
                        "content": "recording"
                    }
                ],
                "start_time": "0.74",
                "end_time": "1.35",
                "speaker_label": "spk_0"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.999",
                        "content": "is"
                    }
                ],
                "start_time": "1.36",
                "end_time": "1.5",
                "speaker_label": "spk_0"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.999",
                        "content": "from"
                    }
                ],
                "start_time": "1.509",
                "end_time": "1.69",
                "speaker_label": "spk_0"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.999",
                        "content": "the"
                    }
                ],
                "start_time": "1.7",
                "end_time": "1.779",
                "speaker_label": "spk_0"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.999",
                        "content": "British"
                    }
                ],
                "start_time": "1.789",
                "end_time": "2.14",
                "speaker_label": "spk_0"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.999",
                        "content": "Council"
                    }
                ],
                "start_time": "2.15",
                "end_time": "2.74",
                "speaker_label": "spk_0"
            },
            {
                "type": "punctuation",
                "alternatives": [
                    {
                        "confidence": "0.0",
                        "content": "."
                    }
                ],
                "speaker_label": "spk_0"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.996",
                        "content": "Hello"
                    }
                ],
                "start_time": "8.0",
                "end_time": "8.579",
                "speaker_label": "spk_1"
            },
            {
                "type": "punctuation",
                "alternatives": [
                    {
                        "confidence": "0.0",
                        "content": "."
                    }
                ],
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.996",
                        "content": "Can"
                    }
                ],
                "start_time": "8.63",
                "end_time": "8.92",
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.996",
                        "content": "I"
                    }
                ],
                "start_time": "8.93",
                "end_time": "8.96",
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.996",
                        "content": "help"
                    }
                ],
                "start_time": "8.97",
                "end_time": "9.439",
                "speaker_label": "spk_1"
            },
            {
                "type": "punctuation",
                "alternatives": [
                    {
                        "confidence": "0.0",
                        "content": "?"
                    }
                ],
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.995",
                        "content": "My"
                    }
                ],
                "start_time": "10.569",
                "end_time": "10.72",
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.996",
                        "content": "wife"
                    }
                ],
                "start_time": "10.729",
                "end_time": "11.06",
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.995",
                        "content": "sent"
                    }
                ],
                "start_time": "11.069",
                "end_time": "11.279",
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.994",
                        "content": "me"
                    }
                ],
                "start_time": "11.289",
                "end_time": "11.47",
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.995",
                        "content": "here"
                    }
                ],
                "start_time": "11.479",
                "end_time": "11.81",
                "speaker_label": "spk_1"
            },
            {
                "type": "punctuation",
                "alternatives": [
                    {
                        "confidence": "0.0",
                        "content": "."
                    }
                ],
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.91",
                        "content": "I"
                    }
                ],
                "start_time": "11.819",
                "end_time": "11.949",
                "speaker_label": "spk_1"
            },
            {
                "type": "pronunciation",
                "alternatives": [
                    {
                        "confidence": "0.899",
                        "content": "am"
                    }
                ],
                "start_time": "12.029",
                "end_time": "12.289",
                "speaker_label": "spk_1"
            }
        ]
    }
}

# Extract transcripts from results
# transcripts = json_data.get("results", {}).get("transcripts", [])
# transcripts = json_data["results"]["transcripts"][0]["transcript"]

#already json data so not need to load  json.load
# transcripts = json_data
# transcript_str = transcripts[0]["transcript"]


# Extract conversation details
# conversation=[]
# conversation.append(transcripts)
# formatted_conversation = conversation[0]

#
# result = json_data.get("results", {}).get("items", {})
# # result = json_data["results"]["items"]
#
#
# conversation3 = []
# for item in result:
#     conversation3.append({
#         "type": item["type"],
#         "confidence": item["alternatives"][0].get("confidence", ""),
#         "content": item["alternatives"][0].get("content", ""),
#         "start_time": item.get("start_time", ""),
#         "end_time": item.get("end_time", ""),
#         "speaker_label": item.get("speaker_label", "")
#     })
#
#
#
# current_speaker = None
# current_sentence = {"content": "", "start_time": 0., "end_time": None, "confidence": []}
#
# for item in conversation3:
#     if current_speaker is None:
#         current_speaker = item["speaker_label"]
#
#     if current_speaker == item["speaker_label"]:
#         current_sentence["content"] += " " + item["content"]
#         current_sentence["end_time"] = item["end_time"]
#         current_sentence["confidence"].append(float(item["confidence"]))
#     else:
#         # Add the completed sentence to the conversation
#         mean_confidence = sum(current_sentence["confidence"]) / len(current_sentence["confidence"])
#         formatted_conversation.append({
#             "type": "pronunciation",
#             "confidence": str(mean_confidence),
#             "content": current_sentence["content"].strip(),
#             "start_time": current_sentence["start_time"],
#             "end_time": current_sentence["end_time"],
#             "speaker_label": current_speaker
#         })
#
#         # Reset for the new speaker
#         current_sentence = {"content": item["content"], "start_time": item["start_time"],
#                             "end_time": item["end_time"], "confidence": [float(item["confidence"])]}
#         current_speaker = item["speaker_label"]
#
#
# # Add the last sentence to the conversation
# if current_speaker is not None:
#     mean_confidence = sum(current_sentence["confidence"]) / len(current_sentence["confidence"])
#     formatted_conversation.append({
#         "type": "pronunciation",
#         "confidence": str(mean_confidence),
#         "content": current_sentence["content"].strip(),
#         "start_time": current_sentence["start_time"],
#         "end_time": current_sentence["end_time"],
#         "speaker_label": current_speaker
#     })

# # Print the modified conversation
# for entry in formatted_conversation:
#     print(entry)



# Extract the transcript string directly from the dictionary
transcript_str = json_data["results"]["transcripts"][0]["transcript"]

print(transcript_str)

print(type(transcript_str))
